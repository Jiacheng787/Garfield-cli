<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/Garfield-cli/blog/rss.xml" title="Garfield CLI RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Garfield-cli/blog/atom.xml" title="Garfield CLI Atom Feed"><title data-react-helmet="true">分包优化 | Garfield CLI</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://your-docusaurus-test-site.com/Garfield-cli/docs/Webpack优化方案/分包优化"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="分包优化 | Garfield CLI"><meta data-react-helmet="true" name="description" content="1. 什么是分包"><meta data-react-helmet="true" property="og:description" content="1. 什么是分包"><link data-react-helmet="true" rel="shortcut icon" href="/Garfield-cli/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://your-docusaurus-test-site.com/Garfield-cli/docs/Webpack优化方案/分包优化"><link data-react-helmet="true" rel="alternate" href="https://your-docusaurus-test-site.com/Garfield-cli/docs/Webpack优化方案/分包优化" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://your-docusaurus-test-site.com/Garfield-cli/docs/Webpack优化方案/分包优化" hreflang="x-default"><link rel="stylesheet" href="/Garfield-cli/assets/css/styles.05707757.css">
<link rel="preload" href="/Garfield-cli/assets/js/runtime~main.6c26c4f6.js" as="script">
<link rel="preload" href="/Garfield-cli/assets/js/main.6f6bb69a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Garfield-cli/"><div class="navbar__logo"><img src="/Garfield-cli/img/logo.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/Garfield-cli/img/logo.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Garfield CLI</b></a><a class="navbar__item navbar__link navbar__link--active" href="/Garfield-cli/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/Garfield-cli/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Jiacheng787/Garfield-cli" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Garfield-cli/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Garfield-cli/docs/Webpack5插件升级方案">Webpack 5 插件升级方案</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Webpack 优化方案</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Garfield-cli/docs/Webpack优化方案/常用优化方案">常用优化方案</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Garfield-cli/docs/Webpack优化方案/启用Tree-Shaking功能">启用 Tree-Shaking 功能</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Garfield-cli/docs/Webpack优化方案/开发环境启用HMR">开发环境启用 HMR</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Garfield-cli/docs/Webpack优化方案/模块构建缓存">模块构建缓存</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Garfield-cli/docs/Webpack优化方案/多进程打包">多进程打包</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Garfield-cli/docs/Webpack优化方案/提升编译性能">提升编译性能</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Garfield-cli/docs/Webpack优化方案/分包优化">分包优化</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Garfield-cli/docs/Webpack优化方案/使用Scope-Hoisting">使用 Scope Hoisting</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">自动化脚本</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>分包优化</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="1-什么是分包">1. 什么是分包<a aria-hidden="true" class="hash-link" href="#1-什么是分包" title="Direct link to heading">​</a></h2><p>默认情况下，Webpack 会将所有代码构建成一个单独的包，这在小型项目通常不会有明显的性能问题，但伴随着项目的推进，包体积逐步增长可能会导致应用的首屏加载时间越来越长。归根结底这种将所有资源打包成一个文件的方式存在两个弊端：</p><ul><li><strong>「资源冗余」</strong>：客户端必须等待整个应用的代码包都加载完毕才能启动运行，但可能用户当下访问的内容只需要使用其中一部分代码</li><li><strong>「缓存失效」</strong>：将所有资源达成一个包后，所有改动 —— 即使只是修改了一个字符，客户端都需要重新下载整个代码包，缓存命中率极低</li></ul><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>这些问题都可以通过对产物做适当的分解拆包（Code Splitting）解决。</p><ul><li>对于资源冗余，常用的方法是配置 <strong>路由懒加载</strong>，即服务器只返回当前路由对应页面所需的资源，这样既可以减小通过网络传输的文件体积，同时浏览器也无需一次加载整个应用全部代码，提升了资源加载、解析速度。</li><li>对于缓存问题，由于 <code>node_modules</code> 中的资源通常变动较少，因此可以抽成一个单独的包，那么业务代码的频繁变动不会导致这部分第三方资源被无意义地重复加载。为此，Webpack 专门提供了 <code>SplitChunksPlugin</code> 插件，用于实现产物分包。</li></ul></div></div><p><code>SplitChunksPlugin</code> 是 Webpack 4 之后引入的分包方案（此前为 <code>CommonsChunkPlugin</code>），它能够基于一些启发式的规则将 Module 编排进不同的 Chunk 序列，并最终将应用代码分门别类打包出多份产物，从而实现分包功能。</p><p>使用上，<code>SplitChunksPlugin</code> 的配置规则比较抽象，仔细拆解后关键逻辑在于：</p><ul><li><code>SplitChunksPlugin</code> 通过 <strong>module 被引用频率</strong>、<strong>chunk 大小</strong>、<strong>包请求数</strong> 三个维度决定是否执行分包操作，这些决策都可以通过 <code>optimization.splitChunks</code> 配置项调整定制，基于这些维度我们可以实现：<ul><li>单独打包某些特定路径的内容，例如 <code>node_modules</code> 打包为 <code>vendors</code></li><li>单独打包使用频率较高的文件</li></ul></li><li><code>SplitChunksPlugin</code> 还提供 <strong>配置组</strong> 概念 <code>optimization.splitChunks.cacheGroup</code>，用于为不同类型的资源设置更有针对性的配置信息</li><li><code>SplitChunksPlugin</code> 还内置了 <code>default</code> 与 <code>defaultVendors</code> 两个配置组，提供一些开箱即用的特性：<ul><li><code>node_modules</code> 资源会命中 <code>defaultVendors</code> 规则，并被单独打包</li><li>只有包体超过 20kb 的 Chunk 才会被单独打包</li><li>加载 Async Chunk 所需请求数不得超过 30</li><li>加载 Initial Chunk 所需请求数不得超过 30</li></ul></li></ul><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>这里所说的请求数不能等价对标到 http 资源请求数，下文会细讲</p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="2-什么是-chunk">2. 什么是 Chunk<a aria-hidden="true" class="hash-link" href="#2-什么是-chunk" title="Direct link to heading">​</a></h2><p>在 Webpack 中，Chunk 是打包产物基本组织单位，可以等价认为有多少 Chunk 就会对应生成多少产物(Bundle)。Webpack 内部包含三种类型的 Chunk：</p><ul><li><strong>Initial Chunk</strong>：基于 Entry 配置项生成的 Chunk，在多入口打包的情况下，配置几个 Entry 就生成几个 Chunk</li><li><strong>Async Chunk</strong>：异步模块引用，如 <code>import(xxx)</code> 语句对应的异步 Chunk</li><li><strong>Runtime Chunk</strong>：只包含运行时代码的 Chunk</li></ul><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>参考：</p><p><a href="https://juejin.cn/post/6961724298243342344" target="_blank" rel="noopener noreferrer">有点难的知识点：Webpack Chunk 分包规则详解</a></p></div></div><p>而 <code>SplitChunksPlugin</code> 默认只对 Async Chunk 生效，开发者也可以通过 <code>optimization.splitChunks.chunks</code> 调整作用范围，该配置项支持如下值：</p><ul><li>字符串 <code>&#x27;all&#x27;</code> ：对 Initial Chunk 与 Async Chunk 都生效，建议优先使用该值</li><li>字符串 <code>&#x27;initial&#x27;</code> ：只对 Initial Chunk 生效</li><li>字符串 <code>&#x27;async&#x27;</code> ：只对 Async Chunk 生效</li><li>函数 <code>(chunk) =&gt; boolean</code> ：该函数返回 <code>true</code> 时生效</li></ul><p>例如：</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  optimization</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    splitChunks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      chunks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;all&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="3-分包策略详解">3. 分包策略详解<a aria-hidden="true" class="hash-link" href="#3-分包策略详解" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="31-根据-module-使用频率分包">3.1 根据 Module 使用频率分包<a aria-hidden="true" class="hash-link" href="#31-根据-module-使用频率分包" title="Direct link to heading">​</a></h3><p><code>SplitChunksPlugin</code> 支持按 Module 被 Chunk 引用的次数决定是否进行分包，开发者可通过 <code>optimization.splitChunks.minChunks</code> 设定最小引用次数，例如：</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  optimization</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    splitChunks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// 设定引用次数超过 4 的模块才进行分包</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      minChunks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>需要注意，这里“被 Chunk 引用次数”并不直接等价于被 <code>import</code> 的次数，而是取决于上游调用者是否被视作 Initial Chunk 或 Async Chunk 处理，例如：</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// common.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;common chunk&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// async-module.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">common</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./common&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// entry-a.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">common</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./common&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;./async-module&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// entry-b.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">common</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./common&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// webpack.config.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  entry</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    entry1</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./src/entry-a.js&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    entry2</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./src/entry-b.js&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  optimization</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    splitChunks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      minChunks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>上例包含四个模块，形成如下模块关系图：</p><p><img alt="image" src="data:image/webp;base64,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"></p><p>示例中，<code>entry-a</code>、<code>entry-b</code> 分别被视作 Initial Chunk 处理；<code>async-module</code> 被 <code>entry-a</code> 以异步方式引入，因此被视作 Async Chunk 处理。那么对于 <code>common</code> 模块来说，分别被三个不同的 Chunk 引入，此时引用次数为 3，命中 <code>optimization.splitChunks.minChunks = 2</code> 规则，因此该模块 <strong>「可能」</strong> 会被单独分包，最终产物：</p><ul><li><code>entry-a.js</code></li><li><code>entry-b.js</code></li><li><code>async-module.js</code></li><li><code>commont.js</code></li></ul><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>这里说 <strong>可能</strong> 是因为分包还受到 <strong>分包数量</strong> 和 <strong>分包体积</strong> 的影响，下面会介绍</p></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="32-限制分包数量">3.2 限制分包数量<a aria-hidden="true" class="hash-link" href="#32-限制分包数量" title="Direct link to heading">​</a></h3><p>在满足 <code>minChunks</code> 基础上，还可以通过 <code>maxInitialRequest/maxAsyncRequests</code> 配置项限定分包数量，配置项语义：</p><ul><li><code>maxInitialRequest</code>：用于设置 Initial Chunk 最大并行请求数</li><li><code>maxAsyncRequests</code>：用于设置 Async Chunk 最大并行请求数</li></ul><p>这里所说的“请求数”，是指加载一个 Chunk 时所需同步加载的分包数。例如对于一个 Chunk A，如果根据分包规则(如模块引用次数、第三方包)分离出了若干子 Chunk A¡，那么请求 A 时，浏览器需要同时请求所有的 A¡，此时并行请求数等于 ¡ 个分包加 A 主包，即 ¡+1。</p><p>举个例子，对于上例所说的模块关系：</p><p><img alt="image" src="data:image/webp;base64,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"></p><p>若 <code>minChunks = 2</code> ，则 <code>common</code> 模块命中 <code>minChunks</code> 规则被独立分包，浏览器请求 <code>entry-a</code> 时，则需要同时请求 <code>common</code> 包，并行请求数为 1 + 1 = 2。</p><p>而对于下述模块关系：</p><p><img alt="image" src="data:image/webp;base64,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"></p><p>若 <code>minChunks = 2</code> ，则 <code>common-1</code> 、<code>common-2</code> 同时命中 <code>minChunks</code> 规则被分别打包，浏览器请求 <code>entry-b</code> 时需要同时请求 <code>common-1</code> 、<code>common-2</code> 两个分包，并行数为 2 + 1 = 3，此时若 <code>maxInitialRequest = 2</code>，则分包数超过阈值，<code>SplitChunksPlugin</code> 会放弃 <code>common-1</code> 、<code>common-2</code> 中体积较小的分包。<code>maxAsyncRequest</code> 逻辑与此类似，不在赘述。</p><p>并行请求数关键逻辑总结如下：</p><ul><li>Initial Chunk 本身算一个请求</li><li>Async Chunk 不算并行请求</li><li>通过 <code>runtimeChunk</code> 拆分出的 runtime 不算并行请求</li><li>如果同时有两个 Chunk 满足拆分规则，但是 <code>maxInitialRequests</code> (或 <code>maxAsyncRequest</code>) 的值只能允许再拆分一个模块，那么体积更大的模块会被优先拆解</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="33-限制分包体积">3.3 限制分包体积<a aria-hidden="true" class="hash-link" href="#33-限制分包体积" title="Direct link to heading">​</a></h3><p>在满足 <code>minChunks</code> 与 <code>maxInitialRequests</code> 的基础上，<code>SplitChunksPlugin</code> 还会进一步判断 Chunk 包大小决定是否分包，这一规则相关的配置项非常多：</p><ul><li><code>minSize</code>：超过这个尺寸的 Chunk 才会正式被分包</li><li><code>maxSize</code>：超过这个尺寸的 Chunk 会尝试继续做分包</li><li><code>maxAsyncSize</code>：与 <code>maxSize</code> 功能类似，但只对异步引入的模块生效</li><li><code>maxInitialSize</code>：与 maxSize 类似，但只对 entry 配置的入口模块生效</li><li><code>enforceSizeThreshold</code>：超过这个尺寸的 Chunk 会被强制分包，忽略上述其它 size 限制</li></ul><p>那么，结合前面介绍的两种规则，<code>SplitChunksPlugin</code> 的主体流程如下：</p><ol><li><p><code>SplitChunksPlugin</code> 尝试将命中 <code>minChunks</code> 规则的 Module 统一抽到一个额外的 Chunk 对象；</p></li><li><p>判断该 Chunk 是否满足 <code>maxInitialRequests</code> 阈值，若满足则进行下一步；</p></li><li><p>判断该 Chunk 资源的体积是否大于上述配置项 <code>minSize</code> 声明的下限阈值；</p><p>a. 如果体积 <strong>「小于」</strong> <code>minSize</code> 则取消这次分包，对应的 Module 依然会被合并入原来的 Chunk</p><p>b. 如果 Chunk 体积 <strong>「大于」</strong> minSize 则判断是否超过 <code>maxSize</code>、<code>maxAsyncSize</code>、<code>maxInitialSize</code> 声明的上限阈值，如果超过则尝试将该 Chunk 继续分割成更小的部分</p></li></ol><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>虽然 <code>maxSize</code> 等上限阈值逻辑会产生更多的包体，但缓存粒度会更小，命中率相对也会更高，配合持久缓存与 HTTP 2 的多路复用能力，网络性能反而会有正向收益。</p></div></div><p>以上述模块关系为例：</p><p><img alt="image" src="data:image/webp;base64,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"></p><p>若此时 Webpack 配置的 <code>minChunks</code> 大于 2，且 <code>maxInitialRequests</code> 也同样大于 2，如果 <code>common</code> 模块的体积大于上述说明的 <code>minSize</code> 配置项则分包成功，<code>common</code> 会被分离为单独的 Chunk，否则会被合并入原来的 3 个 Chunk。</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>注意，这些属性的优先级顺序为：</p><p><code>maxInitialRequest/maxAsyncRequests</code> &lt; <code>maxSize</code> &lt; <code>minSize</code></p><p>而命中 <code>enforceSizeThreshold</code> 阈值的 Chunk 会直接跳过这些属性判断，强制进行分包。</p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="4-使用-cachegroups">4. 使用 cacheGroups<a aria-hidden="true" class="hash-link" href="#4-使用-cachegroups" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="41-理解缓存组">4.1 理解缓存组<a aria-hidden="true" class="hash-link" href="#41-理解缓存组" title="Direct link to heading">​</a></h3><p>除上述 <code>minChunks</code>、<code>maxInitialRequest</code>、<code>minSize</code> 等基础规则外，<code>SplitChunksPlugin</code> 还提供了 <code>cacheGroups</code> 配置项用于为不同文件组设置不同的规则，例如：</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  optimization</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    splitChunks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cacheGroups</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        vendors</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            test</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token regex regex-source language-regex" style="color:#36acaa">[\\/]node_modules[\\/]</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            minChunks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            minSize</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>示例通过 <code>cacheGroups</code> 属性设置 <code>vendors</code> 缓存组，所有命中 <code>vendors.test</code> 规则的模块都会被视作 <code>vendors</code> 分组，优先应用该组下的 <code>minChunks</code>、<code>minSize</code> 等分包配置。</p><p>除了 <code>minChunks</code> 等分包基础配置项之外，<code>cacheGroups</code> 还支持一些与分组逻辑强相关的属性，包括：</p><ul><li><code>test</code>：接受正则表达式、函数及字符串，所有符合 <code>test</code> 判断的 Module 或 Chunk 都会被分到该组</li><li><code>type</code>：接受正则表达式、函数及字符串，与 <code>test</code> 类似均用于筛选分组命中的模块，区别是它判断的依据是文件类型而不是文件名，例如 <code>type = &#x27;json&#x27;</code> 会命中所有 JSON 文件</li><li><code>idHint</code>：字符串型，用于设置 Chunk ID，它还会被追加到最终产物文件名中，例如 <code>idHint = &#x27;vendors&#x27;</code> 时，输出产物文件名形如 <code>vendors-xxx-xxx.js</code></li><li><code>priority</code>：数字型，用于设置该分组的优先级，若模块命中多个缓存组，则优先被分到 <code>priority</code> 更大的组</li></ul><p>缓存组的作用在于能为不同类型的资源设置更具适用性的分包规则，一个典型场景是将所有 <code>node_modules</code> 下的模块统一打包到 <code>vendors</code> 产物，从而实现第三方库与业务代码的分离。</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="42-默认分组">4.2 默认分组<a aria-hidden="true" class="hash-link" href="#42-默认分组" title="Direct link to heading">​</a></h3><p>Webpack 提供了两个开箱即用的 <code>cacheGroups</code>，分别命名为 <code>default</code> 与 <code>defaultVendors</code>，默认配置：</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  optimization</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    splitChunks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cacheGroups</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword module" style="color:#00009f">default</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          idHint</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          reuseExistingChunk</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          minChunks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          priority</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        defaultVendors</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          idHint</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;vendors&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          reuseExistingChunk</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          test</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token regex regex-source language-regex" style="color:#36acaa">[\\/]node_modules[\\/]</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token regex regex-flags" style="color:#36acaa">i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          priority</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>这两个配置组能帮助我们：</p><ul><li>将所有 <code>node_modules</code> 中的资源单独打包到 <code>vendors-xxx-xx.js</code> 命名的产物</li><li>对引用次数大于等于 2 的模块，也就是被多个 Chunk 引用的模块，单独打包</li></ul><p>开发者也可以将默认分组设置为 false，关闭分组配置，例如：</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  optimization</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    splitChunks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cacheGroups</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword module" style="color:#00009f">default</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="5-配置项回顾">5. 配置项回顾<a aria-hidden="true" class="hash-link" href="#5-配置项回顾" title="Direct link to heading">​</a></h2><p>最后，我们再回顾一下 <code>SplitChunksPlugin</code> 支持的配置项：</p><ul><li><code>minChunks</code>：用于设置引用阈值，被引用次数超过该阈值的 Module 才会进行分包处理</li><li><code>maxInitialRequest/maxAsyncRequests</code>：用于限制 Initial Chunk(或 Async Chunk) 最大并行请求数，本质上是在限制最终产生的分包数量</li><li><code>minSize</code>：超过这个尺寸的 Chunk 才会正式被分包</li><li><code>maxSize</code>：超过这个尺寸的 Chunk 会尝试继续做分包</li><li><code>maxAsyncSize</code>：与 <code>maxSize</code> 功能类似，但只对异步引入的模块生效</li><li><code>maxInitialSize</code>：与 <code>maxSize</code> 类似，但只对 <code>entry</code> 配置的入口模块生效</li><li><code>enforceSizeThreshold</code>：超过这个尺寸的 Chunk 会被强制分包，忽略上述其它 size 限制</li><li><code>cacheGroups</code>：用于设置缓存组规则，为不同类型的资源设置更有针对性的分包策略</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="6-拆分运行时包">6. 拆分运行时包<a aria-hidden="true" class="hash-link" href="#6-拆分运行时包" title="Direct link to heading">​</a></h2><p>除了 entry、异步模块外，webpack 5之后还支持基于 <code>runtime</code> 的分包规则。除业务代码外，Webpack 编译产物中还需要包含一些用于支持 webpack 模块化、异步加载等特性的支撑性代码，这类代码在 webpack 中被统称为 <code>runtime</code>。</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>参考：</p><p><a href="https://juejin.cn/post/6964341775561392135" target="_blank" rel="noopener noreferrer">Webpack 原理系列六： 彻底理解 Webpack 运行时</a></p></div></div><p>运行时代码的内容由业务代码所使用到的特性决定，例如当 Webpack 检测到业务代码中使用了异步加载能力，就会将异步加载相关的运行时注入到产物中，因此业务代码用到的特性越多，运行时就会越大，有时甚至可以超过 1M 之多。</p><p>此时，可以将 <code>optimization.runtimeChunk</code> 设置为 <code>true</code>，以此将运行时代码拆分到一个独立的 Chunk，实现分包。</p><p>Webpack 运行时代码单独打包（Webpack5 新特性，详见 <a href="https://juejin.cn/post/6961724298243342344" target="_blank" rel="noopener noreferrer">Webpack Chunk 分包规则</a>），单独打包不是目的，主要是为了设置缓存。这块代码基本上不会修改，如果还跟业务代码一起打包进去，那么每次业务代码修改，浏览器还得加载一遍 webapck runtime 的代码，浪费带宽：</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  entry</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    index</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">import</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./src/index&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> runtime</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;solid-runtime&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="7-最佳实践">7. 最佳实践<a aria-hidden="true" class="hash-link" href="#7-最佳实践" title="Direct link to heading">​</a></h2><p>那么，如何设置最适合项目情况的分包规则呢？这个问题并没有放诸四海皆准的通用答案，因为软件系统与现实世界的复杂性，决定了很多计算机问题并没有银弹，不过我个人还是总结了几条可供参考的最佳实践：</p><ol><li><p>「尽量将第三方库拆为独立分包」</p><p>例如在一个 React + Redux 项目中，可想而知应用中的大多数页面都会依赖于这两个库，那么就应该将它们从具体页面剥离，避免重复加载。</p><p>但对于使用频率并不高的第三方库，就需要按实际情况灵活判断，例如项目中只有某个页面 A 接入了 Three.js，如果将这个库跟其它依赖打包在一起，那用户在访问其它页面的时候都需要加载 Three.js，最终效果可能反而得不偿失，这个时候可以尝试使用异步加载功能将 Three.js 独立分包</p></li><li><p>「保持按路由分包，减少首屏资源负载」</p><p>设想一个超过 10 个页面的应用，假如将这些页面代码全部打包在一起，那么用户访问其中任意一个页面都需要等待其余 9 个页面的代码全部加载完毕后才能开始运行应用，这对 TTI 等性能指标明显是不友好的，所以应该尽量保持按路由维度做异步模块加载，所幸很多知名框架如 React、Vue 对此都有很成熟的技术支持</p></li><li><p>「尽量保持」 <code>**chunks = &#x27;all&#x27;**</code></p><p><code>optimization.splitChunks.chunks</code> 配置项用于设置 <code>SplitChunksPlugin</code> 的工作范围，我们应该尽量保持 <code>chunks = &#x27;all&#x27;</code> 从而最大程度优化分包逻辑</p></li></ol><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>参考：</p><p><a href="https://mp.weixin.qq.com/s/LrASIdA19iwIwng29G5HpA" target="_blank" rel="noopener noreferrer">Webpack 性能系列四：分包优化</a></p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/main/website/docs/Webpack优化方案/分包优化.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Garfield-cli/docs/Webpack优化方案/提升编译性能"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->提升编译性能</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Garfield-cli/docs/Webpack优化方案/使用Scope-Hoisting"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">使用 Scope Hoisting<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-什么是分包" class="table-of-contents__link toc-highlight">1. 什么是分包</a></li><li><a href="#2-什么是-chunk" class="table-of-contents__link toc-highlight">2. 什么是 Chunk</a></li><li><a href="#3-分包策略详解" class="table-of-contents__link toc-highlight">3. 分包策略详解</a><ul><li><a href="#31-根据-module-使用频率分包" class="table-of-contents__link toc-highlight">3.1 根据 Module 使用频率分包</a></li><li><a href="#32-限制分包数量" class="table-of-contents__link toc-highlight">3.2 限制分包数量</a></li><li><a href="#33-限制分包体积" class="table-of-contents__link toc-highlight">3.3 限制分包体积</a></li></ul></li><li><a href="#4-使用-cachegroups" class="table-of-contents__link toc-highlight">4. 使用 cacheGroups</a><ul><li><a href="#41-理解缓存组" class="table-of-contents__link toc-highlight">4.1 理解缓存组</a></li><li><a href="#42-默认分组" class="table-of-contents__link toc-highlight">4.2 默认分组</a></li></ul></li><li><a href="#5-配置项回顾" class="table-of-contents__link toc-highlight">5. 配置项回顾</a></li><li><a href="#6-拆分运行时包" class="table-of-contents__link toc-highlight">6. 拆分运行时包</a></li><li><a href="#7-最佳实践" class="table-of-contents__link toc-highlight">7. 最佳实践</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/Garfield-cli/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/Garfield-cli/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/Garfield-cli/assets/js/runtime~main.6c26c4f6.js"></script>
<script src="/Garfield-cli/assets/js/main.6f6bb69a.js"></script>
</body>
</html>